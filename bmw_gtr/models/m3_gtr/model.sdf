<?xml version="1.0"?>
<sdf version="1.4">
	<model name="m3_gtr">
		<static>false</static>

		<!-- ############################  LINKS   ############################ -->

		<link name='chassis_link'>
			<pose>0 0 0 0 0 1.5708</pose>
			<inertial>
				<pose>0 0 0 0 0 0</pose>
				<mass>0.26244</mass>
				<inertia>
					<ixx>0.00283444</ixx>
					<ixy>0</ixy>
					<ixz>0</ixz>
					<iyy>0.00039867</iyy>
					<iyz>0</iyz>
					<izz>0.00323293</izz>
				</inertia>
			</inertial>
			<gravity>1</gravity>
			<kinematic>0</kinematic>
			<enable_wind>0</enable_wind>
			<visual name='chassis_visual'>
				<pose>0 0 -0.0065 0 0 -1.57079</pose>
				<geometry>
					<mesh>
						<uri>model://m3_gtr/meshes/chassisV5.dae</uri>
						<scale>1 1 1</scale>
					</mesh>
				</geometry>
				<material>
					<lighting>1</lighting>
					<shader type='vertex'>
						<normal_map>__default__</normal_map>
					</shader>
					<ambient>0.6 0.6 0.6 1</ambient>
					<diffuse>0.85 0.85 0.85 1</diffuse>
					<specular>0.6 0.6 0.6 1</specular>
					<emissive>0 0 0 1</emissive>
				</material>
				<transparency>0</transparency>
				<cast_shadows>1</cast_shadows>
			</visual>
			<collision name='chassis_collision'>
				<laser_retro>0</laser_retro>
				<max_contacts>10</max_contacts>
				<pose>0 0 0 0 0 0</pose>
				<geometry>
					<box>
						<size>0.135 0.36 0.002</size>
					</box>
				</geometry>
				<surface>
					<friction>
						<ode>
							<mu>1</mu>
							<mu2>1</mu2>
							<fdir1>0 0 0</fdir1>
							<slip1>0</slip1>
							<slip2>0</slip2>
						</ode>
						<torsional>
							<coefficient>1</coefficient>
							<patch_radius>0</patch_radius>
							<surface_radius>0</surface_radius>
							<use_patch_radius>1</use_patch_radius>
							<ode>
								<slip>0</slip>
							</ode>
						</torsional>
					</friction>
					<bounce>
						<restitution_coefficient>0</restitution_coefficient>
						<threshold>1e+06</threshold>
					</bounce>
					<contact>
						<collide_without_contact>0</collide_without_contact>
						<collide_without_contact_bitmask>1</collide_without_contact_bitmask>
						<collide_bitmask>1</collide_bitmask>
						<ode>
							<soft_cfm>0</soft_cfm>
							<soft_erp>0.2</soft_erp>
							<kp>1e+13</kp>
							<kd>1</kd>
							<max_vel>0.01</max_vel>
							<min_depth>0</min_depth>
						</ode>
						<bullet>
							<split_impulse>1</split_impulse>
							<split_impulse_penetration_threshold>-0.01</split_impulse_penetration_threshold>
							<soft_cfm>0</soft_cfm>
							<soft_erp>0.2</soft_erp>
							<kp>1e+13</kp>
							<kd>1</kd>
						</bullet>
					</contact>
				</surface>
			</collision>
		  	
			<!-- ############################  SENSORS   ############################ -->				
			
			<!--sensor name="camera_top_sensor" type="camera">
        		<pose>0 1 2.5 0 1.04 -1.5708</pose>  
        		<camera>
        		  <horizontal_fov>1.047</horizontal_fov>  
        		  <image>
        		    <width>640</width>
        		    <height>480</height>
        		    <format>R8G8B8</format>
        		  </image>
        		  <clip>
        		    <near>0.1</near>
        		    <far>100</far>
        		  </clip>
        		  <noise>
        		    <type>gaussian</type>
        		    <mean>0.0</mean>
        		    <stddev>0.007</stddev>
        		  </noise>
        		</camera>
        		<plugin name="gazebo_ros_camera" filename="libgazebo_ros_camera.so">
        		  <ros>
				  	<namespace>/automobile</namespace>
        		    <remapping>image_raw:=image</remapping>
        		    <remapping>camera_info:=info</remapping>
        		  </ros>
        		  <camera_name>camera_top</camera_name>
        		  <frame_name>chassis_link</frame_name>
        		  <hack_baseline>0.07</hack_baseline>
        		  <update_rate>120.0</update_rate>
        		</plugin>
      		</sensor-->
      		<!--sensor name="camera_sensor" type="camera">
            	<pose>0 -0.05 0.211 0 0.5235988 -1.5708</pose>
            	<camera>
            	  <horizontal_fov>1.22173</horizontal_fov> 
            	  <image>
            	    <width>320</width>
            	    <height>240</height>
            	    <format>R8G8B8</format>
            	  </image>
            	  <clip>
            	    <near>0.1</near>
            	    <far>4</far>
            	  </clip>
            	  <noise>
            	    <type>gaussian</type>
            	    <mean>0.0</mean>
            	    <stddev>0.007</stddev>
            	  </noise>
            	</camera>
            	<plugin name="gazebo_ros_camera" filename="libgazebo_ros_camera.so">
            	  <ros>
		    	  	<namespace>/automobile</namespace>
            	    <remapping>image_raw:=image</remapping>
            	    <remapping>camera_info:=info</remapping>
            	  </ros>
            	  <camera_name>camera</camera_name>
            	  <frame_name>chassis_link</frame_name>
            	  <hack_baseline>0.07</hack_baseline>
            	  <update_rate>120.0</update_rate>
            	</plugin>
        	</sensor-->
			<!--sensor name="lidar_sensor" type="ray">
			  <pose>0 -0.11 0.035 0 0 -1.5708</pose>   
			  <update_rate>20</update_rate>
			  <visualize>true</visualize> 
			  <ray>
			    <scan>
			      <horizontal>
			        <samples>360</samples>        
			        <resolution>1</resolution>
			        <min_angle>-2.094395</min_angle> 
			        <max_angle>2.094395</max_angle>  
			      </horizontal>
			      <vertical>
			        <samples>1</samples>         
			        <resolution>1</resolution>
			        <min_angle>0</min_angle>
			        <max_angle>0</max_angle>
			      </vertical>
			    </scan>
			    <range>
			      <min>0.16</min>   
			      <max>2.0</max>  
			      <resolution>0.01</resolution>
			    </range>
			    <noise>
			      <type>gaussian</type>
			      <mean>0.0</mean>
			      <stddev>0.01</stddev>
			    </noise>
			  </ray>

			  <plugin name='laser' filename='libgazebo_ros_ray_sensor.so'>
             	<ros>
             	  <namespace>/automobile</namespace>
				  <remapping>~/out:=scan</remapping>
             	</ros>
             	<output_type>sensor_msgs/LaserScan</output_type>
          	 </plugin>
			</sensor-->

		</link>
		<link name='car_body_link'>
			<pose>-0.0215 0 -0.0325 0 0 0</pose>
			<inertial>
				<mass>1</mass>
				<inertia>
					<ixx>0.166667</ixx>
					<ixy>0</ixy>
					<ixz>0</ixz>
					<iyy>0.166667</iyy>
					<iyz>0</iyz>
					<izz>0.166667</izz>
				</inertia>
			</inertial>
			<visual name='car_body_visual'>
				<geometry>
					<mesh>
						<uri>model://m3_gtr/meshes/M3_GTR_Body.dae</uri>
						<scale>0.0385 0.0385 0.0385</scale>
					</mesh>
				</geometry>
				<transparency>0</transparency>
				<cast_shadows>1</cast_shadows>
			</visual>
		</link>
		<link name='wheel_back_left_link'>
			<pose>-0.1485 0.072 0 0 0 0</pose>
			<inertial>
				<mass>0.038</mass>
				<inertia>
					<ixx>0.00001283</ixx>
					<ixy>0</ixy>
					<ixz>0</ixz>
					<iyy>0.00002069</iyy>
					<iyz>0</iyz>
					<izz>0.00001283</izz>
				</inertia>
			</inertial>
			<gravity>1</gravity>
			<kinematic>0</kinematic>
			<enable_wind>0</enable_wind>
			<visual name='wheel_back_left_visual'>
				<pose>0 0 0 0 0 0</pose>
				<geometry>
					<mesh>
						<uri>model://m3_gtr/meshes/M3_GTR_Wheel.dae</uri>
						<scale>0.038 0.038 0.038</scale>
					</mesh>
				</geometry>
			</visual>
			<collision name='wheel_back_left_collision'>
				<pose>0 0 0 1.5708 0 0</pose>
				<geometry>
					<cylinder>
						<radius>0.031000</radius>
						<length>0.028000</length>
					</cylinder>
				</geometry>
				<laser_retro>0</laser_retro>
				<max_contacts>10</max_contacts>
				<surface>
					<friction>
						<ode>
							<mu>0.9</mu>
							<!-- 0.7 -->
							<mu2>0.9</mu2>
							<!-- 0.7 -->
							<fdir1>0 0 0</fdir1>
							<slip1>0</slip1>
							<slip2>0</slip2>
						</ode>
						<torsional>
							<coefficient>1</coefficient>
							<patch_radius>0</patch_radius>
							<surface_radius>0</surface_radius>
							<use_patch_radius>1</use_patch_radius>
							<ode>
								<slip>0</slip>
							</ode>
						</torsional>
					</friction>
					<bounce>
						<restitution_coefficient>0</restitution_coefficient>
						<threshold>1e+06</threshold>
					</bounce>
					<contact>
						<collide_without_contact>0</collide_without_contact>
						<collide_without_contact_bitmask>1</collide_without_contact_bitmask>
						<collide_bitmask>1</collide_bitmask>
						<ode>
							<soft_cfm>0</soft_cfm>
							<soft_erp>0.2</soft_erp>
							<kp>1e+07</kp>
							<kd>1</kd>
							<max_vel>0.01</max_vel>
							<min_depth>0</min_depth>
						</ode>
						<bullet>
							<split_impulse>1</split_impulse>
							<split_impulse_penetration_threshold>-0.01</split_impulse_penetration_threshold>
							<soft_cfm>0</soft_cfm>
							<soft_erp>0.2</soft_erp>
							<kp>1e+07</kp>
							<kd>1</kd>
						</bullet>
					</contact>
				</surface>
			</collision>
		</link>
		<link name='wheel_back_right_link'>
			<pose>-0.1485 -0.072 0 0 0 3.14159</pose>
			<inertial>
				<mass>0.038</mass>
				<inertia>
					<ixx>0.00001283</ixx>
					<ixy>0</ixy>
					<ixz>0</ixz>
					<iyy>0.00002069</iyy>
					<iyz>0</iyz>
					<izz>0.00001283</izz>
				</inertia>
			</inertial>
			<gravity>1</gravity>
			<kinematic>0</kinematic>
			<enable_wind>0</enable_wind>
			<visual name='wheel_back_right_visual'>
				<pose>0 0 0 0 0 0</pose>
				<geometry>
					<mesh>
						<uri>model://m3_gtr/meshes/M3_GTR_Wheel.dae</uri>
						<scale>0.038 0.038 0.038</scale>
					</mesh>
				</geometry>
			</visual>
			<collision name='wheel_back_right_collision'>
				<pose>0 0 0 1.5708 0 0</pose>
				<geometry>
					<cylinder>
						<radius>0.031000</radius>
						<length>0.028000</length>
					</cylinder>
				</geometry>
				<laser_retro>0</laser_retro>
				<max_contacts>10</max_contacts>
				<surface>
					<friction>
						<ode>
							<mu>0.9</mu>
							<!-- 0.7 -->
							<mu2>0.9</mu2>
							<!-- 0.7 -->
							<fdir1>0 0 0</fdir1>
							<slip1>0</slip1>
							<slip2>0</slip2>
						</ode>
						<torsional>
							<coefficient>1</coefficient>
							<patch_radius>0</patch_radius>
							<surface_radius>0</surface_radius>
							<use_patch_radius>1</use_patch_radius>
							<ode>
								<slip>0</slip>
							</ode>
						</torsional>
					</friction>
					<bounce>
						<restitution_coefficient>0</restitution_coefficient>
						<threshold>1e+06</threshold>
					</bounce>
					<contact>
						<collide_without_contact>0</collide_without_contact>
						<collide_without_contact_bitmask>1</collide_without_contact_bitmask>
						<collide_bitmask>1</collide_bitmask>
						<ode>
							<soft_cfm>0</soft_cfm>
							<soft_erp>0.2</soft_erp>
							<kp>1e+07</kp>
							<kd>1</kd>
							<max_vel>0.01</max_vel>
							<min_depth>0</min_depth>
						</ode>
						<bullet>
							<split_impulse>1</split_impulse>
							<split_impulse_penetration_threshold>-0.01</split_impulse_penetration_threshold>
							<soft_cfm>0</soft_cfm>
							<soft_erp>0.2</soft_erp>
							<kp>1e+07</kp>
							<kd>1</kd>
						</bullet>
					</contact>
				</surface>
			</collision>
		</link>
		<link name='wheel_front_left_link'>
			<pose>0.1185 0.072 0 0 0 0</pose>
			<inertial>
				<mass>0.038</mass>
				<inertia>
					<ixx>0.00001283</ixx>
					<ixy>0</ixy>
					<ixz>0</ixz>
					<iyy>0.00002069</iyy>
					<iyz>0</iyz>
					<izz>0.00001283</izz>
				</inertia>
			</inertial>
			<gravity>1</gravity>
			<kinematic>0</kinematic>
			<enable_wind>0</enable_wind>
			<visual name='wheel_front_left_visual'>
				<pose>0 0 0 0 0 0</pose>
				<geometry>
					<mesh>
						<uri>model://m3_gtr/meshes/M3_GTR_Wheel.dae</uri>
						<scale>0.038 0.038 0.038</scale>
					</mesh>
				</geometry>
			</visual>
			<collision name='wheel_front_left_collision'>
				<pose>0 0 0 1.5708 0 0</pose>
				<geometry>
					<cylinder>
						<radius>0.031000</radius>
						<length>0.028000</length>
					</cylinder>
				</geometry>
				<laser_retro>0</laser_retro>
				<max_contacts>10</max_contacts>
				<surface>
					<friction>
						<ode>
							<mu>0.9</mu>
							<!-- 0.7 -->
							<mu2>0.9</mu2>
							<!-- 0.7 -->
							<fdir1>0 0 0</fdir1>
							<slip1>0</slip1>
							<slip2>0</slip2>
						</ode>
						<torsional>
							<coefficient>1</coefficient>
							<patch_radius>0</patch_radius>
							<surface_radius>0</surface_radius>
							<use_patch_radius>1</use_patch_radius>
							<ode>
								<slip>0</slip>
							</ode>
						</torsional>
					</friction>
					<bounce>
						<restitution_coefficient>0</restitution_coefficient>
						<threshold>1e+06</threshold>
					</bounce>
					<contact>
						<collide_without_contact>0</collide_without_contact>
						<collide_without_contact_bitmask>1</collide_without_contact_bitmask>
						<collide_bitmask>1</collide_bitmask>
						<ode>
							<soft_cfm>0</soft_cfm>
							<soft_erp>0.2</soft_erp>
							<kp>1e+07</kp>
							<kd>1</kd>
							<max_vel>0.01</max_vel>
							<min_depth>0</min_depth>
						</ode>
						<bullet>
							<split_impulse>1</split_impulse>
							<split_impulse_penetration_threshold>-0.01</split_impulse_penetration_threshold>
							<soft_cfm>0</soft_cfm>
							<soft_erp>0.2</soft_erp>
							<kp>1e+07</kp>
							<kd>1</kd>
						</bullet>
					</contact>
				</surface>
			</collision>
		</link>
		<link name='wheel_front_right_link'>
			<pose>0.1185 -0.072 0 0 0 3.14159</pose>
			<inertial>
				<mass>0.038</mass>
				<inertia>
					<ixx>0.00001283</ixx>
					<ixy>0</ixy>
					<ixz>0</ixz>
					<iyy>0.00002069</iyy>
					<iyz>0</iyz>
					<izz>0.00001283</izz>
				</inertia>
			</inertial>
			<gravity>1</gravity>
			<kinematic>0</kinematic>
			<enable_wind>0</enable_wind>
			<visual name='wheel_front_right_visual'>
				<pose>0 0 0 0 0 0</pose>
				<geometry>
					<mesh>
						<uri>model://m3_gtr/meshes/M3_GTR_Wheel.dae</uri>
						<scale>0.038 0.038 0.038</scale>
					</mesh>
				</geometry>
			</visual>
			<collision name='wheel_front_right_collision'>
				<pose>0 0 0 1.5708 0 0</pose>
				<geometry>
					<cylinder>
						<radius>0.031000</radius>
						<length>0.028000</length>
					</cylinder>
				</geometry>
				<laser_retro>0</laser_retro>
				<max_contacts>10</max_contacts>
				<surface>
					<friction>
						<ode>
							<mu>0.9</mu>
							<!-- 0.7 -->
							<mu2>0.9</mu2>
							<!-- 0.7 -->
							<fdir1>0 0 0</fdir1>
							<slip1>0</slip1>
							<slip2>0</slip2>
						</ode>
						<torsional>
							<coefficient>1</coefficient>
							<patch_radius>0</patch_radius>
							<surface_radius>0</surface_radius>
							<use_patch_radius>1</use_patch_radius>
							<ode>
								<slip>0</slip>
							</ode>
						</torsional>
					</friction>
					<bounce>
						<restitution_coefficient>0</restitution_coefficient>
						<threshold>1e+06</threshold>
					</bounce>
					<contact>
						<collide_without_contact>0</collide_without_contact>
						<collide_without_contact_bitmask>1</collide_without_contact_bitmask>
						<collide_bitmask>1</collide_bitmask>
						<ode>
							<soft_cfm>0</soft_cfm>
							<soft_erp>0.2</soft_erp>
							<kp>1e+07</kp>
							<kd>1</kd>
							<max_vel>0.01</max_vel>
							<min_depth>0</min_depth>
						</ode>
						<bullet>
							<split_impulse>1</split_impulse>
							<split_impulse_penetration_threshold>-0.01</split_impulse_penetration_threshold>
							<soft_cfm>0</soft_cfm>
							<soft_erp>0.2</soft_erp>
							<kp>1e+07</kp>
							<kd>1</kd>
						</bullet>
					</contact>
				</surface>
			</collision>
		</link>
		<link name='steering_left_link'>
			<pose>0.1185 0.072 0 1.5708 0 0</pose>
			<inertial>
				<pose>0 0 0 0 0 0</pose>
				<mass>0.001</mass>
				<!--inertia>
				<ixx>8.5833e-09</ixx>
				<ixy>0</ixy>
				<ixz>0</ixz>
				<iyy>8.5833e-09</iyy>
				<iyz>0</iyz>
				<izz>5e-09</izz>
			</inertia-->
				<inertia>
					<ixx>0.00014583</ixx>
					<ixy>0</ixy>
					<ixz>0</ixz>
					<iyy>0.00014583</iyy>
					<iyz>0</iyz>
					<izz>0.000125</izz>
				</inertia>
			</inertial>
			<gravity>1</gravity>
			<self_collide>0</self_collide>
			<kinematic>0</kinematic>
			<enable_wind>0</enable_wind>
			<visual name='steering_left_visual'>
				<pose>0 0 0 0 0 0</pose>
				<geometry>
					<cylinder>
						<radius>0.001</radius>
						<length>0.01</length>
					</cylinder>
				</geometry>
				<material>
					<lighting>1</lighting>
					<script>
						<uri>file://media/materials/scripts/gazebo.material</uri>
						<name>Gazebo/Grey</name>
					</script>
					<shader type='vertex'>
						<normal_map>__default__</normal_map>
					</shader>
					<ambient>0.3 0.3 0.3 1</ambient>
					<diffuse>0.7 0.7 0.7 1</diffuse>
					<specular>0.01 0.01 0.01 1</specular>
					<emissive>0 0 0 1</emissive>
				</material>
				<transparency>0</transparency>
				<cast_shadows>1</cast_shadows>
			</visual>
		</link>
		<link name='steering_right_link'>
			<pose>0.1185 -0.072 0 1.5708 0 0</pose>
			<inertial>
				<pose>0 0 0 0 0 0</pose>
				<mass>0.001</mass>
				<!--inertia>
				<ixx>8.5833e-09</ixx>
				<ixy>0</ixy>
				<ixz>0</ixz>
				<iyy>8.5833e-09</iyy>
				<iyz>0</iyz>
				<izz>5e-09</izz>
			</inertia-->
				<inertia>
					<ixx>0.00014583</ixx>
					<ixy>0</ixy>
					<ixz>0</ixz>
					<iyy>0.00014583</iyy>
					<iyz>0</iyz>
					<izz>0.000125</izz>
				</inertia>
			</inertial>
			<gravity>1</gravity>
			<self_collide>0</self_collide>
			<kinematic>0</kinematic>
			<enable_wind>0</enable_wind>
			<visual name='steering_right_visual'>
				<pose>0 0 0 0 0 0</pose>
				<geometry>
					<cylinder>
						<radius>0.001</radius>
						<length>0.01</length>
					</cylinder>
				</geometry>
				<material>
					<lighting>1</lighting>
					<script>
						<uri>file://media/materials/scripts/gazebo.material</uri>
						<name>Gazebo/Grey</name>
					</script>
					<shader type='vertex'>
						<normal_map>__default__</normal_map>
					</shader>
					<ambient>0.3 0.3 0.3 1</ambient>
					<diffuse>0.7 0.7 0.7 1</diffuse>
					<specular>0.01 0.01 0.01 1</specular>
					<emissive>0 0 0 1</emissive>
				</material>
				<transparency>0</transparency>
				<cast_shadows>1</cast_shadows>
			</visual>
		</link>
		
		<!-- ############################  JOINTS   ############################ -->

		<joint name='body_joint' type='fixed'>
			<parent>chassis_link</parent>
			<child>car_body_link</child>
			<physics>
				<ode>
					<limit>
						<cfm>0</cfm>
						<erp>0.2</erp>
					</limit>
					<suspension>
						<cfm>0</cfm>
						<erp>0.2</erp>
					</suspension>
				</ode>
			</physics>
		</joint>
		<joint name='wheel_back_left_joint' type='revolute'>
			<parent>chassis_link</parent>
			<child>wheel_back_left_link</child>
			<axis>
				<xyz>0 1 0</xyz>
				<use_parent_model_frame>0</use_parent_model_frame>
				<limit>
					<lower>-1.79769e+308</lower>
					<upper>1.79769e+308</upper>
					<effort>-1</effort>
					<velocity>-1</velocity>
				</limit>
				<dynamics>
					<spring_reference>0</spring_reference>
					<spring_stiffness>0</spring_stiffness>
					<damping>0</damping>
					<friction>0</friction>
				</dynamics>
			</axis>
			<physics>
				<ode>
					<limit>
						<cfm>0</cfm>
						<erp>0.2</erp>
					</limit>
					<suspension>
						<cfm>0</cfm>
						<erp>0.2</erp>
					</suspension>
				</ode>
			</physics>
		</joint>
		<joint name='wheel_back_right_joint' type='revolute'>
			<parent>chassis_link</parent>
			<child>wheel_back_right_link</child>
			<axis>
				<xyz>0 -1 0</xyz>
				<use_parent_model_frame>0</use_parent_model_frame>
				<limit>
					<lower>-1.79769e+308</lower>
					<upper>1.79769e+308</upper>
					<effort>-1</effort>
					<velocity>-1</velocity>
				</limit>
				<dynamics>
					<spring_reference>0</spring_reference>
					<spring_stiffness>0</spring_stiffness>
					<damping>0</damping>
					<friction>0</friction>
				</dynamics>
			</axis>
			<physics>
				<ode>
					<limit>
						<cfm>0</cfm>
						<erp>0.2</erp>
					</limit>
					<suspension>
						<cfm>0</cfm>
						<erp>0.2</erp>
					</suspension>
				</ode>
			</physics>
		</joint>
		<joint name='steering_left_joint' type='revolute'>
			<parent>chassis_link</parent>
			<child>steering_left_link</child>
			<axis>
				<xyz>0 1 0</xyz>
				<use_parent_model_frame>0</use_parent_model_frame>
				<limit>
					<lower>-0.523599</lower>
					<!-- 30 degrees in radians -->
					<upper>0.523599</upper>
					<effort>-1</effort>
					<velocity>-1</velocity>
				</limit>
				<dynamics>
					<spring_reference>0</spring_reference>
					<spring_stiffness>0</spring_stiffness>
					<damping>0.01</damping>
					<!-- a bit of damping helped -->
					<friction>0</friction>
					<!-- adding friction breaks the model -->
				</dynamics>
			</axis>
			<physics>
				<ode>
					<limit>
						<cfm>0</cfm>
						<erp>0.2</erp>
					</limit>
					<suspension>
						<cfm>0</cfm>
						<erp>0.2</erp>
					</suspension>
				</ode>
			</physics>
		</joint>
		<joint name='steering_right_joint' type='revolute'>
			<parent>chassis_link</parent>
			<child>steering_right_link</child>
			<axis>
				<xyz>0 1 0</xyz>
				<use_parent_model_frame>0</use_parent_model_frame>
				<limit>
					<lower>-0.523599</lower>
					<!-- 30 degrees in radians -->
					<upper>0.523599</upper>
					<effort>-1</effort>
					<velocity>-1</velocity>
				</limit>
				<dynamics>
					<spring_reference>0</spring_reference>
					<spring_stiffness>0</spring_stiffness>
					<damping>0.01</damping>
					<!-- a bit of damping helped -->
					<friction>0</friction>
					<!-- adding friction breaks the model -->
				</dynamics>
			</axis>
			<physics>
				<ode>
					<limit>
						<cfm>0</cfm>
						<erp>0.2</erp>
					</limit>
					<suspension>
						<cfm>0</cfm>
						<erp>0.2</erp>
					</suspension>
				</ode>
			</physics>
		</joint>
		<joint name='wheel_front_left_joint' type='revolute'>
			<parent>steering_left_link</parent>
			<child>wheel_front_left_link</child>
			<axis>
				<xyz>0 1 0</xyz>
				<use_parent_model_frame>0</use_parent_model_frame>
				<limit>
					<lower>-1.79769e+308</lower>
					<upper>1.79769e+308</upper>
					<effort>-1</effort>
					<velocity>-1</velocity>
				</limit>
				<dynamics>
					<spring_reference>0</spring_reference>
					<spring_stiffness>0</spring_stiffness>
					<damping>0</damping>
					<friction>0</friction>
				</dynamics>
			</axis>
			<physics>
				<ode>
					<limit>
						<cfm>0</cfm>
						<erp>0.2</erp>
					</limit>
					<suspension>
						<cfm>0</cfm>
						<erp>0.2</erp>
					</suspension>
				</ode>
			</physics>
		</joint>
		<joint name='wheel_front_right_joint' type='revolute'>
			<parent>steering_right_link</parent>
			<child>wheel_front_right_link</child>
			<axis>
				<xyz>0 -1 0</xyz>
				<use_parent_model_frame>0</use_parent_model_frame>
				<limit>
					<lower>-1.79769e+308</lower>
					<upper>1.79769e+308</upper>
					<effort>-1</effort>
					<velocity>-1</velocity>
				</limit>
				<dynamics>
					<spring_reference>0</spring_reference>
					<spring_stiffness>0</spring_stiffness>
					<damping>0</damping>
					<friction>0</friction>
				</dynamics>
			</axis>
			<physics>
				<ode>
					<limit>
						<cfm>0</cfm>
						<erp>0.2</erp>
					</limit>
					<suspension>
						<cfm>0</cfm>
						<erp>0.2</erp>
					</suspension>
				</ode>
			</physics>
		</joint>

		<!-- ############################  PLUGINS   ############################ -->

		<plugin name='carlike_robot_plugin' filename='libcarlikerobot_ros_plugin.so'>
			<wheelbase>0.26</wheelbase>
			<axletrack>0.162</axletrack>
			<wheelradius>0.0325</wheelradius>
			<speed_wheel_joints>
				<front_wheel_joints>
					<leftjoint>wheel_front_left_joint</leftjoint>
					<rightjoint>wheel_front_right_joint</rightjoint>
				</front_wheel_joints>
				<rear_wheel_joints>
					<leftjoint>wheel_back_left_joint</leftjoint>
					<rightjoint>wheel_back_right_joint</rightjoint>
				</rear_wheel_joints>
				<kp>0.01</kp>
				<ki>0.0</ki>
				<kd>0.0</kd>
			</speed_wheel_joints>
			<steer_wheel_joints>
				<leftjoint>steering_left_joint</leftjoint>
				<rightjoint>steering_right_joint</rightjoint>
				<kp>10.0</kp>
				<ki>0.0</ki>
				<kd>0.1</kd>
			</steer_wheel_joints>
			<initial_steer>0.0</initial_steer>
			<initial_speed>0.0</initial_speed>
			<robotNamespace>/</robotNamespace>
		</plugin>
		<plugin name='bno055' filename='libbno055_plugin.so'> </plugin>
		<plugin name='gps' filename='libgps_plugin.so'> </plugin>

	</model>
</sdf>